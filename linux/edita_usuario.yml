---
    - name: Administracao de usuarios | Contas Linux
      hosts: all
      gather_facts: no
      vars:
        nome: "{{nome}}"
        senha: "{{senha}}"
        grupo: "{{grupo}}"
        operacao: "{{operacao}}"
      tasks:

        - name:  Cria usuario Linux
          block:
            - name: Add the user 
              user:
                name: '{{nome}}'
          when: operacao == "Criar conta"
        
        - name:  Cria usuario Linux      
          block:
            - name: Aplicando senha
              user:
                name: '{{nome}}'
                password: '{{senha}}'
          when: operacao == "Criar conta"
        

        - name: Alterar a senha
          block:
            - name: Add the user 
              user:
                name: '{{nome}}'
                password: '{{senha}}'
          when: operacao == "Alterar senha"